-cases [Inweb] 'inweb/Tests/Test Cases'
-cases [Painter] 'inweb/Tests/Test Painter'

-recipe [Inweb]
	set: $INWEB = inweb/Tangled/inweb
	set: $INTERNAL = Internal

	set: $WEB = $PATH/$CASE.inweb
	mkdir: $PATH/_Tangled_Actual
	mkdir: $PATH/_Tangled_Ideal
	mkdir: $PATH/_Tangled_Console
	set: $TA = $PATH/_Tangled_Actual/$CASE.txt
	set: $TI = $PATH/_Tangled_Ideal/$CASE.txt
	set: $TC = $PATH/_Tangled_Console/$CASE.txt
	step: $INWEB $WEB -tangle-to $TA >$TC 2>&1
	or: 'failed inweb' $TC
	show: $TA
	match text: $TA $TI
	or: 'produced the wrong tangled code'

	mkdir: $PATH/_Woven_Actual
	mkdir: $PATH/_Woven_Ideal
	mkdir: $PATH/_Woven_Console
	set: $WA = $PATH/_Woven_Actual/$CASE.html
	set: $WI = $PATH/_Woven_Ideal/$CASE.html
	set: $WC = $PATH/_Woven_Console/$CASE.txt
	step: $INWEB $WEB -weave-to $WA >$WC 2>&1
	or: 'failed inweb' $WC
	show: $WA
	match text: $WA $WI
	or: 'produced the wrong woven code'

	mkdir: $PATH/_Scan_Actual
	mkdir: $PATH/_Scan_Ideal
	set: $SA = $PATH/_Scan_Actual/$CASE.txt
	set: $SI = $PATH/_Scan_Ideal/$CASE.txt
	step: $INWEB $WEB -scan >$SA 2>&1
	or: 'failed inweb' $SA
	show: $SA
	match text: $SA $SI
	or: 'produced the wrong scan'

	pass: 'passed'

-end

-recipe [Painter]
	set: $INWEB = inweb/Tangled/inweb
	set: $LANGUAGES = inweb/Dialects
	set: $INTERNAL = Internal

	set: $CANVAS = $PATH/$CASE.txt
	mkdir: $PATH/_Results_Actual
	mkdir: $PATH/_Results_Ideal
	mkdir: $PATH/_Results_Console
	set: $A = $PATH/_Results_Actual/$CASE.txt
	set: $I = $PATH/_Results_Ideal/$CASE.txt
	step: $INWEB -test-language-on $CANVAS -test-language $LANGUAGES/$CASE.ildf >$A 2>&1
	or: 'failed inweb' $A
	show: $A
	match text: $A $I
	or: 'produced the wrong painting'

	pass: 'passed'

-end
